@define-mixin bannerbox {
  align-items: center;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
}

@define-mixin banner {
  @mixin bannerbox;
  height: 70vh;

  @media screen and (--bp-desktop) {
    h1 {
      font-size: pxtorem(50);
      line-height: pxtorem(60);
    }
  }
  @media screen and (--bp-wide) {
    h1 {
      font-size: pxtorem(60);
      line-height: pxtorem(72);
    }
  }
}

.uomcontent [role="main"] {
  & > article:first-child {
    padding-top: 0;
  }

  /* DEPRECATED */
  &.headerless {
    border-top: 1px solid var(--col-white);
  }

  /* Alternate syntax to avoid class on parent container */
  .headerless {
    border-top: 1px solid var(--col-white);
    padding-top: 0;
  }

  header,
  & > header:first-child {
    padding-top: pxtorem(24);
    padding-bottom: pxtorem(24);
    background-color: var(--col-navy-main);
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    color: var(--col-white);
    overflow: hidden;
    width: 100%;

    &.reverse {
      color: var(--col-black-dark);
    }

    &.solid-black {
      background-color: var(--col-black-dark);
    }

    &.darker {
      background-color: var(--col-tertiary-navy);
    }

    &.solid-paleblue {
      background-color: var(--col-navy-light);
      color: var(--col-black-dark);
    }

    &.image {
      @mixin bannerbox;
      min-height: pxtorem(300);
      height: auto;

      & > h1,
      & > p,
      & > div {
        flex-basis: 100%;
      }

      & > h1,
      & > p {
        padding-bottom: pxtorem(48);
        max-width: var(--w-mid);
        padding-left: pxtorem(20);
        padding-right: pxtorem(20);
        text-align: center;
      }

      &.with-filters {
        height: auto;
      }
    }

    &.banner {
      @mixin banner;
    }

    &.with-box {
      display: table;
      padding: 0;

      @media screen and (--bp-tablet) {
        padding-bottom: pxtorem(30);
        padding-top: pxtorem(30);
      }
    }

    h1 {
      font-size: 2.0625rem;
      line-height: pxtorem(48);
      padding-bottom: 0;
      max-width: var(--w-sml);
      font-weight: var(--fw-bold);
      margin: 0 auto;
      text-align: left;
      margin-top: pxtorem(8);

      &.article {
        font-weight: var(--fw-semibold);
      }

      @media screen and (--bp-desktop) {
        font-size: pxtorem(45);
        line-height: pxtorem(60);
      }

      @media screen and (--bp-wide) {
        font-size: pxtorem(55);
        line-height: pxtorem(60);
      }
    }

    p {
      max-width: var(--w-sml);
      font-weight: var(--fw-semibold);
      margin: 0 auto;

      @media screen and (--bp-desktop) {
        font-size: pxtorem(20);
        line-height: pxtorem(24);
        padding-top: pxtorem(24);
      }

      @media screen and (--bp-wide) {
        font-size: pxtorem(24);
        line-height: pxtorem(36);
      }
    }

    p.author {
      font-size: pxtorem(16);
      line-height: pxtorem(24);
      max-width: pxtorem(350);
      font-style: italic;

      &::before {
        margin-top: 0;
        margin-bottom: pxtorem(24);
        width: pxtorem(80);
        border-top: 1px solid currentColor;
        content: '';
        display: block;
        margin-left: auto;
        margin-right: auto;
      }

      em {
        font-size: pxtorem(18);
        line-height: pxtorem(24);
        font-style: normal;
        font-weight: var(--fw-semibold);
      }
    }

    & + hr.spacer {
      margin-top: 0;
    }

    @media screen and (--bp-desktop) {
      padding-top: pxtorem(48);
      padding-bottom: pxtorem(48);
      /* overflow: hidden; */
    }
  }
}

.uomcontent [role="main"] .contrast-helper {
  background-color: var(--col-blue-mid-2);
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  padding-top: 0;
  position: relative;

  header {
    background-color: color(var(--col-black-dark) alpha(50%));
  }

  &.no-filter header {
    background-color: transparent;
  }
  &.filter-blue header {
    background-color: color(var(--col-blue-mid-2) alpha(50%));
  }
  &.filter-green header {
    background-color: color(var(--col-emerald-mid-2) alpha(50%));
  }
  &.filter-yellow header {
    background-color: color(var(--col-yellow-mid-2) alpha(50%));
  }
  &.filter-red header {
    background-color: color(var(--col-pink-dark) alpha(50%));
  }

  .stage {
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;

    canvas {
      margin: 0 auto;
    }
  }
}

.uomcontent [role="main"] .fixed-bg {
  background-attachment: fixed;
  background-color: var(--col-black-dark);
  background-position: top center;
  background-size: inherit;
}

.uomcontent .floating + [role="main"] {
  header,
  & > header:first-child {
    padding-top: pxtorem(120);

    @media screen and (--bp-desktop) {
      padding-top: pxtorem(180);
    }
  }
}

.ie9 {
  .uomcontent {
    header,
    & > header:first-child {
      display: block;
      position: relative;
      width: 100%;

      &.image > p {
        padding-bottom: pxtorem(200);
      }
    }

    header.image, header.banner {
      display: table;
    }

    [role="main"] .contrast-helper header {
      background-color: transparent;
    }
  }
}

.ie10 .uomcontent [role="main"],
.ie11 .uomcontent [role="main"] {
  header,
  & > header:first-child {
    &.image {
      height: pxtorem(300);

      &.with-filters {
        height: auto;
      }
    }

    &.banner {
      height: pxtorem(300);

      @media screen and (--bp-height-smallest) {
        height: 32.5rem;
      }

      @media screen and (--bp-height-small) {
        height: 38.75rem;
      }

      @media screen and (--bp-height-medium) {
        height: 45rem;
      }

      @media screen and (--bp-height-big) {
        height: 50rem;
      }
    }
  }
}
